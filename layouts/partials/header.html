<header class="header">
    <div class="navbar-container">
        <div class="hamburger" id="hamburger-menu" aria-label="Abrir menu" tabindex="0">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <nav class="nav">
            <div class="logo">
                <a href="{{ "" | absLangURL }}" accesskey="h" title="{{ .Site.Title }} (Alt + H)">
                    {{ .Site.Title }}
                </a>
                
                {{- if (not site.Params.disableThemeToggle) }}
                <button id="theme-toggle" accesskey="t" title="Alternar Tema (Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
                {{- end }}
            </div>
            <ul id="menu" class="menu">
                <li>
                    <a href="/posts/" class="menu-item">Posts</a>
                </li>
                <li>
                    <a href="/categories/" class="menu-item">Categorias</a>
                </li>
                <li>
                    <a href="#" id="open-search-modal" class="menu-item">Pesquisar</a>
                </li>
                <li>
                    <a href="mailto:fariablog1@gmail.com" class="menu-item">Contato</a>
                </li>
            </ul>
            <!-- Menu mobile -->
            <div id="mobile-menu" class="mobile-menu">
                <ul>
                    <li><a href="/posts/">Posts</a></li>
                    <li><a href="/categories/">Categorias</a></li>
                    <li><a href="#" id="open-search-modal-mobile">Pesquisar</a></li>
                    <li><a href="mailto:fariablog1@gmail.com">Contato</a></li>
                </ul>
            </div>
        </nav>
    </div>
</header>

<style>
/* Container centralizador da navbar */
.navbar-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 32px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    min-height: 72px;
    position: relative;
}
.header {
    background: transparent;
    box-shadow: none;
    width: 100%;
    margin-bottom: 0;
}
.nav {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 32px;
}
.logo {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.logo a {
    font-size: 24px;
    font-weight: bold;
    color: var(--primary);
    text-decoration: none;
}

/* Estilos para o botão de tema */
#theme-toggle {
    border: 0;
    background: none;
    cursor: pointer;
    padding: 0;
    color: var(--primary);
    height: 24px;
    opacity: 0.8;
    display: flex;
    align-items: center;
    margin-top: 2px; /* Ajuste fino para alinhar com o texto */
}

#theme-toggle svg {
    display: block;
    width: 20px;
    height: 20px;
}

#theme-toggle:hover {
    opacity: 1;
}

html.dark #moon {
    display: none;
}

html:not(.dark) #sun {
    display: none;
}

.menu {
    display: flex;
    align-items: center;
    gap: 2.2rem;
    list-style: none;
    margin: 0;
    padding: 0;
}
.menu-item {
    text-decoration: none;
    font-size: 1.05rem;
    color: var(--primary);
    transition: color 0.2s;
    padding: 0 2px;
    border-bottom: none;
}
.menu-item:hover {
    color: var(--accent-color);
    opacity: 1;
    border-bottom: none;
}
@media (max-width: 1200px) {
    .navbar-container {
        padding: 0 16px;
    }
}
@media (max-width: 900px) {
    .menu {
        gap: 1.2rem;
    }
}
@media (max-width: 768px) {
    .navbar-container {
        min-height: 56px;
        padding: 0 8px;
    }
    .nav {
        gap: 0.5rem;
    }
    .menu {
        gap: 0.7rem;
    }
}
</style>

<script>
const themeToggle = document.getElementById("theme-toggle");
const htmlElement = document.documentElement;

function setTheme(theme) {
    if (theme === 'dark') {
        htmlElement.classList.add('dark');
        localStorage.setItem("pref-theme", 'dark');
    } else {
        htmlElement.classList.remove('dark');
        localStorage.setItem("pref-theme", 'light');
    }
}

// Evento de clique no botão
themeToggle?.addEventListener("click", () => {
    const isDark = htmlElement.classList.contains('dark');
    setTheme(isDark ? 'light' : 'dark');
});

// Verifica o tema preferido ao carregar a página
(() => {
    const savedTheme = localStorage.getItem("pref-theme");
    const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
    
    if (savedTheme) {
        setTheme(savedTheme);
    } else {
        setTheme(prefersDark ? 'dark' : 'light');
    }
    
    // Torna o botão visível após definir o tema inicial
    if (themeToggle) {
        themeToggle.style.display = 'inline-block';
    }
})();

// Atualiza o tema quando a preferência do sistema mudar
window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
    const savedTheme = localStorage.getItem("pref-theme");
    if (!savedTheme) {
        setTheme(e.matches ? 'dark' : 'light');
    }
});
</script>
